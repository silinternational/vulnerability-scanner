default: test

docker-lang-versions:
	cat docker-images-unknown-versions.txt | ./get-docker-lang-versions.sh

install:
	docker-compose run --rm tests npm install

list-deps:
	docker-compose run --rm tests ash -c "npm ls --all --package-lock-only > dependencies.txt"

update:
	docker-compose run --rm tests npm update
	make list-deps

test: install test-local

test-all:
	docker-compose run --rm tests npm run test-all

test-integration:
	docker-compose run --rm tests npm run test-integration

test-local:
	docker-compose run --rm tests npm run test-local
