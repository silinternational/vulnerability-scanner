#!/bin/bash

while IFS= read -r line; do
  docker run --rm --entrypoint php "$line" -v &>/dev/null
  if [ $? -eq 0 ]; then
    phpVersion=$(docker run --rm --entrypoint php "$line" -r "echo PHP_MAJOR_VERSION . '.' . PHP_MINOR_VERSION;")
  else
    phpVersion="NONE"
  fi
  
  printf '%s,%s\n' "$line" "$phpVersion" >> docker-php-versions.txt
done
