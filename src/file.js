const assert = require('assert')

/**
 * Names of files in a Bitbucket repo that we may want to know about. We list
 * them explicitly so that we can make fewer API calls to Bitbucket when looking
 * for files (i.e. fewer pages of results to separately request from Bitbucket).
 *
 * @type {string[]}
 */
const fileNamesOfInterest = [
  'Dockerfile',
  'composer.lock',
  'package-lock.json'
]

const assertFileNameIsInListWeSearchFor = fileName => {
  const entries = fileNamesOfInterest.join(', ')
  assert(
    fileNamesOfInterest.some(entry => entry === fileName),
    `To find files named ${fileName}, add it to our fileNamesOfInterest list: ${entries}.`
  )
}

module.exports = {
  fileNamesOfInterest,
  assertFileNameIsInListWeSearchFor
}
