
/**
 * Get a list of information about the (production) dependencies specified in
 * the provided JSON string from a composer.lock file.
 *
 * @param {string} composerLockContents
 * @returns {undefined | {name: string, version: string}[]}
 */
module.exports.getDependenciesFromComposerLock = composerLockContents => {
  if (!composerLockContents) {
    return undefined
  }
  const composerLockData = JSON.parse(composerLockContents)
  return composerLockData.packages.map(dependency => ({
    name: dependency.name,
    version: dependency.version
  }))
}
