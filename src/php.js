
/**
 * A list of End-Of-Life (EOL) dates, formatted as yyyy-mm-dd strings, for the
 * known major.minor PHP versions.
 *
 * See <https://php.net/supported-versions> and <https://php.net/eol> 
 *
 * @type {Object}
 */
const eolDatesByVersion = {
  '8.1': '2024-11-25',
  '8.0': '2023-11-26',
  '7.4': '2022-11-28',
  '7.3': '2021-12-06',
  '7.2': '2020-11-30',
  '7.1': '2019-12-01',
  '7.0': '2019-01-10',
  '5.6': '2018-12-31',
  '5.5': '2016-07-21',
  '5.4': '2015-09-03',
  '5.3': '2014-08-14',
  '5.2': '2011-01-06',
  '5.1': '2006-08-24',
  '5.0': '2005-09-05',
  '4.4': '2008-08-07',
  '4.3': '2005-03-31',
  '4.2': '2002-09-06',
  '4.1': '2002-03-12',
  '4.0': '2001-06-23',
  '3.0': '2000-10-20',
}

/**
 * Indicate whether the specified version has already reached End-Of-Life (EOL).
 *
 * @param {string} phpVersion -- Example: 7.2
 * @param {string} currentDate -- The current date, as a yyyy-mm-dd string.
 * @returns {boolean|undefined}
 */
const isVersionEOL = (phpVersion, currentDate) => {
  const eolDate = eolDatesByVersion[phpVersion]
  if (!eolDate) {
    return undefined
  }
  return currentDate > eolDate
}

module.exports = {
  isVersionEOL
}
